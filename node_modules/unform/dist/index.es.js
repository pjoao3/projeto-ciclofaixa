import e,{createContext as t,useContext as r,useEffect as n,useState as i}from"react";function o(e,t){var r,n;if("function"==typeof t)void 0!==(n=t(e))&&(e=n);else if(Array.isArray(t))for(r=0;r<t.length;r++)void 0!==(n=t[r](e))&&(e=n);return e}function a(e,t){return"-"===e[0]&&Array.isArray(t)&&/^-\d+$/.test(e)?t.length+parseInt(e,10):e}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){return Object(e)===e}function c(e){return 0===Object.keys(e).length}function s(e,t){return e.indexOf("[")>=0&&(e=e.replace(/\[/g,".").replace(/]/g,"")),e.split(t)}function f(e,t,r){if(!(this instanceof f))return new f(e,t,r);void 0===t&&(t=!1),void 0===r&&(r=!0),this.separator=e||".",this.override=t,this.useArray=r,this.keepArray=!1,this.cleanup=[]}var p=new f(".",!1,!0);function h(e){return function(){return p[e].apply(p,arguments)}}f.prototype._fill=function(e,t,r,n){var i=e.shift();if(e.length>0){if(t[i]=t[i]||(this.useArray&&function(e){return/^\d+$/.test(e)}(e[0])?[]:{}),!u(t[i])){if(!this.override){if(!u(r)||!c(r))throw new Error("Trying to redefine `"+i+"` which is a "+typeof t[i]);return}t[i]={}}this._fill(e,t[i],r,n)}else{if(!this.override&&u(t[i])&&!c(t[i])){if(!u(r)||!c(r))throw new Error("Trying to redefine non-empty obj['"+i+"']");return}t[i]=o(r,n)}},f.prototype.object=function(e,t){var r=this;return Object.keys(e).forEach(function(n){var i=void 0===t?null:t[n],a=s(n,r.separator).join(r.separator);-1!==a.indexOf(r.separator)?(r._fill(a.split(r.separator),e,e[n],i),delete e[n]):r.override&&(e[n]=o(e[n],i))}),e},f.prototype.str=function(e,t,r,n){return-1!==e.indexOf(this.separator)?this._fill(e.split(this.separator),r,t,n):r.hasOwnProperty(e)&&!this.override||(r[e]=o(t,n)),r},f.prototype.pick=function(e,t,r){var n,i,o,l,u;for(i=s(e,this.separator),n=0;n<i.length;n++){if(l=a(i[n],t),!(t&&"object"==typeof t&&l in t))return;if(n===i.length-1)return r?(o=t[l],delete t[l],Array.isArray(t)&&(u=i.slice(0,-1).join("."),-1===this.cleanup.indexOf(u)&&this.cleanup.push(u)),o):t[l];t=t[l]}return r&&Array.isArray(t)&&(t=t.filter(function(e){return void 0!==e})),t},f.prototype.remove=function(e,t){var r;if(this.cleanup=[],Array.isArray(e)){for(r=0;r<e.length;r++)this.pick(e[r],t,!0);return this._cleanup(t),t}return this.pick(e,t,!0)},f.prototype._cleanup=function(e){var t,r,n,i;if(this.cleanup.length){for(r=0;r<this.cleanup.length;r++)t=(t=(i=(n=this.cleanup[r].split(".")).splice(0,-1).join("."))?this.pick(i,e):e)[n[0]].filter(function(e){return void 0!==e}),this.set(this.cleanup[r],t,e);this.cleanup=[]}},f.prototype.del=f.prototype.remove,f.prototype.move=function(e,t,r,n,i){return"function"==typeof n||Array.isArray(n)?this.set(t,o(this.pick(e,r,!0),n),r,i):(i=n,this.set(t,this.pick(e,r,!0),r,i)),r},f.prototype.transfer=function(e,t,r,n,i,a){return"function"==typeof i||Array.isArray(i)?this.set(t,o(this.pick(e,r,!0),i),n,a):(a=i,this.set(t,this.pick(e,r,!0),n,a)),n},f.prototype.copy=function(e,t,r,n,i,a){return"function"==typeof i||Array.isArray(i)?this.set(t,o(JSON.parse(JSON.stringify(this.pick(e,r,!1))),i),n,a):(a=i,this.set(t,this.pick(e,r,!1),n,a)),n},f.prototype.set=function(e,t,r,n){var i,o,a,u;if(void 0===t)return r;for(a=s(e,this.separator),i=0;i<a.length;i++){if(u=a[i],i===a.length-1)if(n&&l(t)&&l(r[u]))for(o in t)t.hasOwnProperty(o)&&(r[u][o]=t[o]);else if(n&&Array.isArray(r[u])&&Array.isArray(t))for(var c=0;c<t.length;c++)r[a[i]].push(t[c]);else r[u]=t;else r.hasOwnProperty(u)&&(l(r[u])||Array.isArray(r[u]))||(/^\d+$/.test(a[i+1])?r[u]=[]:r[u]={});r=r[u]}return r},f.prototype.transform=function(e,t,r){return t=t||{},r=r||{},Object.keys(e).forEach(function(n){this.set(e[n],this.pick(n,t),r)}.bind(this)),r},f.prototype.dot=function(e,t,r){return t=t||{},r=r||[],Object.keys(e).forEach(function(n){if(u(e[n])&&(l(e[n])&&!c(e[n])||Array.isArray(e[n])&&!this.keepArray&&0!==e[n].length))return this.dot(e[n],t,r.concat(n));t[r.concat(n).join(this.separator)]=e[n]}.bind(this)),t},f.pick=h("pick"),f.move=h("move"),f.transfer=h("transfer"),f.transform=h("transform"),f.copy=h("copy"),f.object=h("object"),f.str=h("str"),f.set=h("set"),f.del=f.remove=h("remove"),f.dot=h("dot"),["override","overwrite"].forEach(function(e){Object.defineProperty(f,e,{get:function(){return p.override},set:function(e){p.override=!!e}})}),["useArray","keepArray"].forEach(function(e){Object.defineProperty(f,e,{get:function(){return p[e]},set:function(t){p[e]=t}})}),f._process=o;var y=f,d=t({initialData:{},errors:{},scopePath:"",registerField:function(){},unregisterField:function(){}});function v(e){var t=r(d),i=t.initialData,o=t.errors,a=t.scopePath,l=t.unregisterField,u=t.registerField,c=a?a+"."+e:e;n(function(){return function(){return l(c)}},[]);var s=y.pick(c,i),f=o[c];return{fieldName:c,registerField:u,defaultValue:s,error:f}}var m=function(){return(m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function b(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r}function g(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function A(t){var r=t.initialData,n=void 0===r?{}:r,o=t.children,a=void 0===o?null:o,l=t.schema,u=t.context,c=void 0===u?{}:u,s=t.onSubmit,f=void 0===s?function(){}:s,p=b(t,["initialData","children","schema","context","onSubmit"]),h=i({}),v=h[0],A=h[1],k=[];return e.createElement(d.Provider,{value:{initialData:n,errors:v,scopePath:"",registerField:function(e){k.push(e)},unregisterField:function(e){k=k.filter(function(t){return t.name!==e})}}},e.createElement("form",m({},p,{onSubmit:function(e){return t=this,r=void 0,i=function(){var t,r,n;return g(this,function(i){switch(i.label){case 0:e.preventDefault(),t=function(){var e={};return k.forEach(function(t){var r=t.name,n=t.ref,i=t.path,o="function"==typeof n?n():n;e[r]=i?y.pick(i,o):o}),y.object(e),e}(),i.label=1;case 1:return i.trys.push([1,4,,5]),l?[4,l.validate(t,{abortEarly:!1,stripUnknown:!0,context:c})]:[3,3];case 2:i.sent(),t=l.cast(t,{stripUnknown:!0,context:c}),i.label=3;case 3:return A({}),f(t),[3,5];case 4:return r=i.sent(),n={},r.inner.forEach(function(e){n[e.path]=e.message}),A(n),[3,5];case 5:return[2]}})},new((n=void 0)||(n=Promise))(function(e,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function l(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){t.done?e(t.value):new n(function(e){e(t.value)}).then(a,l)}u((i=i.apply(t,r||[])).next())});var t,r,n,i}}),a))}function k(t){var n=t.path,i=t.children,o=r(d),a=o.scopePath,l=b(o,["scopePath"]);return e.createElement(d.Provider,{value:m({},l,{scopePath:a.concat(a?"."+n:n)})},i)}function O(t){var r=t.name,n=t.label,i=b(t,["name","label"]),o=v(r),a=o.fieldName,l=o.registerField,u=o.defaultValue,c=o.error;return e.createElement(e.Fragment,null,n&&e.createElement("label",{htmlFor:a},n),e.createElement("input",m({},i,{ref:function(e){l({name:a,ref:e,path:"value"})},id:a,name:a,defaultValue:u})),c&&e.createElement("span",null,c))}function w(t){var r=t.name,n=t.label,i=b(t,["name","label"]),o=v(r),a=o.fieldName,l=o.registerField,u=o.defaultValue,c=o.error;return e.createElement(e.Fragment,null,n&&e.createElement("label",{htmlFor:a},n),e.createElement("textarea",m({},i,{ref:function(e){l({name:a,ref:e,path:"value"})},id:a,name:a,defaultValue:u})),c&&e.createElement("span",null,c))}function E(t){var r=t.name,n=t.label,o=t.options,a=t.multiple,l=b(t,["name","label","options","multiple"]),u=v(r),c=u.fieldName,s=u.registerField,f=u.defaultValue,p=u.error,h=i(),y=h[0],d=h[1];function g(){return y}return e.createElement(e.Fragment,null,n&&e.createElement("label",{htmlFor:c},n),e.createElement("select",m({},l,{id:c,name:c,defaultValue:f,onChange:function(e){if(a){var t=Array.from(e.target.options).filter(function(e){return e.selected}).map(function(e){return e.value});d(t)}else d(e.target.value)},multiple:a,ref:function(){s({name:c,ref:g})}}),!a&&e.createElement("option",{value:""},"Selecione..."),o.map(function(t){var r=t.id,n=t.title;return e.createElement("option",{key:r,value:r},n)})),p&&e.createElement("span",null,p))}export{A as Form,O as Input,k as Scope,E as Select,w as Textarea,v as useField};
//# sourceMappingURL=index.es.js.map
